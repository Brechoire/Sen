{% extends 'shop/emails/base_email.html' %}

{% block email_content %}
<h2 style="color: #2A5C4A; margin-top: 0;">Pr√©commande confirm√©e</h2>

<p>Bonjour {{ order.shipping_first_name }},</p>

<p>Nous vous remercions pour votre pr√©commande <strong>{{ order.order_number }}</strong>.</p>

<div class="order-details">
    <h3 style="margin-top: 0; color: #2A5C4A;">R√©capitulatif de votre pr√©commande</h3>
    {% for item in order.items.all %}
    <div class="order-item">
        <strong>{{ item.book.title }}</strong><br>
        <small>Par {{ item.book.get_authors_display }} - Quantit√© : {{ item.quantity }} - {{ item.unit_price|floatformat:2 }} ‚Ç¨</small>
        {% if item.book.is_preorder and preorder_date %}
        <br><small style="color: #2A5C4A; font-weight: bold;">üìÖ Disponibilit√© pr√©vue : {{ preorder_date|date:"d/m/Y" }}</small>
        {% endif %}
    </div>
    {% endfor %}
    
    <div class="order-summary">
        <div class="order-summary-row">
            <span>Sous-total :</span>
            <span>{{ order.subtotal|floatformat:2 }} ‚Ç¨</span>
        </div>
        {% if order.shipping_cost > 0 %}
        <div class="order-summary-row">
            <span>Frais de port :</span>
            <span>{{ order.shipping_cost|floatformat:2 }} ‚Ç¨</span>
        </div>
        {% else %}
        <div class="order-summary-row">
            <span>Frais de port :</span>
            <span>Gratuit</span>
        </div>
        {% endif %}
        <div class="order-summary-row order-summary-total">
            <span>Total TTC :</span>
            <span>{{ order.total_amount|floatformat:2 }} ‚Ç¨</span>
        </div>
    </div>
</div>

<div class="order-details" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
    <h3 style="margin-top: 0; color: #856404;">Important - Informations sur votre pr√©commande</h3>
    <p style="margin-bottom: 0;">
        <strong>Paiement :</strong> Votre paiement a √©t√© effectu√© imm√©diatement.<br>
        <strong>Livraison :</strong> Votre commande sera exp√©di√©e d√®s que le produit sera disponible.
        {% if preorder_date %}
        <br><strong>Date de disponibilit√© pr√©vue :</strong> {{ preorder_date|date:"d/m/Y" }}
        {% endif %}
    </p>
    <p style="margin-top: 10px; margin-bottom: 0;">
        <strong>Droit d'annulation :</strong> Vous pouvez annuler votre pr√©commande √† tout moment avant son exp√©dition.
    </p>
</div>

<p>Nous vous tiendrons inform√©(e) par email d√®s que votre pr√©commande sera disponible et pr√™te √† √™tre exp√©di√©e.</p>

<p>Merci pour votre confiance !</p>

<p>L'√©quipe {{ shop_name }}</p>
{% endblock %}



